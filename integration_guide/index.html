<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Integration Guide | Documentation</title>
    <meta name="description" content="CloudLinux Documentation">
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
  <link rel="icon" href="/favicon.ico">
    
    <link rel="preload" href="/assets/css/0.styles.af96f550.css" as="style"><link rel="preload" href="/assets/js/app.fa222234.js" as="script"><link rel="preload" href="/assets/js/17.816bc79a.js" as="script"><link rel="prefetch" href="/assets/js/10.d4a72dee.js"><link rel="prefetch" href="/assets/js/11.71ab069f.js"><link rel="prefetch" href="/assets/js/12.575b81ec.js"><link rel="prefetch" href="/assets/js/13.bd8b3318.js"><link rel="prefetch" href="/assets/js/14.81cf9481.js"><link rel="prefetch" href="/assets/js/15.4a33bb3d.js"><link rel="prefetch" href="/assets/js/16.eb51f7b6.js"><link rel="prefetch" href="/assets/js/18.d1f82edd.js"><link rel="prefetch" href="/assets/js/19.98a1e417.js"><link rel="prefetch" href="/assets/js/20.3c1d27bf.js"><link rel="prefetch" href="/assets/js/21.6a41b59f.js"><link rel="prefetch" href="/assets/js/22.82e6fb07.js"><link rel="prefetch" href="/assets/js/23.17599354.js"><link rel="prefetch" href="/assets/js/24.9baa153a.js"><link rel="prefetch" href="/assets/js/25.a271f407.js"><link rel="prefetch" href="/assets/js/26.95f8ec1a.js"><link rel="prefetch" href="/assets/js/27.b03fae6e.js"><link rel="prefetch" href="/assets/js/28.f8adaf02.js"><link rel="prefetch" href="/assets/js/29.dbdfdb53.js"><link rel="prefetch" href="/assets/js/3.45eabde6.js"><link rel="prefetch" href="/assets/js/30.b1feb1e4.js"><link rel="prefetch" href="/assets/js/31.01023812.js"><link rel="prefetch" href="/assets/js/32.3121fa51.js"><link rel="prefetch" href="/assets/js/33.0a1e23b0.js"><link rel="prefetch" href="/assets/js/34.c04ea355.js"><link rel="prefetch" href="/assets/js/35.493207ca.js"><link rel="prefetch" href="/assets/js/36.6e2fc4b8.js"><link rel="prefetch" href="/assets/js/37.3ba4cc82.js"><link rel="prefetch" href="/assets/js/38.0e5db95b.js"><link rel="prefetch" href="/assets/js/39.b6924a81.js"><link rel="prefetch" href="/assets/js/4.c60b8ffa.js"><link rel="prefetch" href="/assets/js/40.1fa192dd.js"><link rel="prefetch" href="/assets/js/41.aeb51b08.js"><link rel="prefetch" href="/assets/js/42.a1e8334a.js"><link rel="prefetch" href="/assets/js/43.44c40500.js"><link rel="prefetch" href="/assets/js/44.656109a3.js"><link rel="prefetch" href="/assets/js/45.26046c64.js"><link rel="prefetch" href="/assets/js/46.28a3bb8b.js"><link rel="prefetch" href="/assets/js/47.44f33a02.js"><link rel="prefetch" href="/assets/js/48.e74f7027.js"><link rel="prefetch" href="/assets/js/49.d8ce9c4b.js"><link rel="prefetch" href="/assets/js/5.c2464805.js"><link rel="prefetch" href="/assets/js/50.5ce96745.js"><link rel="prefetch" href="/assets/js/51.f900c4db.js"><link rel="prefetch" href="/assets/js/52.60b74ce3.js"><link rel="prefetch" href="/assets/js/53.0d93c336.js"><link rel="prefetch" href="/assets/js/54.193b612f.js"><link rel="prefetch" href="/assets/js/55.3407f82b.js"><link rel="prefetch" href="/assets/js/6.f511cc56.js"><link rel="prefetch" href="/assets/js/7.b42db574.js"><link rel="prefetch" href="/assets/js/8.011917f7.js"><link rel="prefetch" href="/assets/js/9.b0a1a53f.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.2f4e28c8.js">
    <link rel="stylesheet" href="/assets/css/0.styles.af96f550.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/logo.svg" alt="Documentation" class="logo"> <span class="site-name site-name--documentation can-hide">Documentation</span></a> <form id="search-form" class="algolia-search-wrapper search-box"><input id="algolia-search-input" class="search-query"></form> <div class="links" style="max-width:nullpx;"><a href="https://cloudlinux.com/trial" target="_blank" class="btn">
      Try Free
    </a> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><span class="title">Language:</span> <a class="dropdown-title"><span class="text">En</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/integration_guide/" class="nav-link router-link-exact-active router-link-active">English</a></li><li class="dropdown-item"><!----> <a href="/ru/integration_guide/" class="nav-link">Русский</a></li></ul></div></div></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><span class="title">Language:</span> <a class="dropdown-title"><span class="text">En</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/integration_guide/" class="nav-link router-link-exact-active router-link-active">English</a></li><li class="dropdown-item"><!----> <a href="/ru/integration_guide/" class="nav-link">Русский</a></li></ul></div></div></nav>  <ul class="sidebar-links"><li><div class="sidebar-group first"><div class="sidebar-heading open"><span>Content</span> <!----></div> <ul class="sidebar-group-items"><li><a href="/cloudlinux_installation/" class="sidebar-link">Installation</a></li><li><a href="/limits/" class="sidebar-link">Limits</a></li><li><a href="/command-line_tools/" class="sidebar-link">Command-line Tools</a></li><li><a href="/lve_manager/" class="sidebar-link">LVE Manager</a></li><li><a href="/reseller_limits/" class="sidebar-link">Reseller Limits</a></li><li><a href="/lve-stats_2/" class="sidebar-link">LVE-Stats 2</a></li><li><a href="/cagefs/" class="sidebar-link">CageFS</a></li><li><a href="/mysql_governor/" class="sidebar-link">MySQL Governor</a></li><li><a href="/php_selector/" class="sidebar-link">PHP Selector</a></li><li><a href="/python_selector/" class="sidebar-link">Python Selector</a></li><li><a href="/ruby_selector/" class="sidebar-link">Ruby Selector</a></li><li><a href="/node_js_selector/" class="sidebar-link">Node.js Selector</a></li><li><a href="/inodes_limits/" class="sidebar-link">inodes</a></li><li><a href="/kernel_settings/" class="sidebar-link">Kernel Settings</a></li><li><a href="/apache_mod_lsapi/" class="sidebar-link">Apache mod_lsapi PRO</a></li><li><a href="/cloudlinux-fchange/" class="sidebar-link">File Change API</a></li><li><a href="/mod_proctitle/" class="sidebar-link">mod_proctitle</a></li><li><a href="/additional_packages/" class="sidebar-link">Additional Packages</a></li><li><a href="/integration_guide/" class="active sidebar-link">Integration Guide</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/integration_guide/#detecting-and-working-with-cloudlinux" class="sidebar-link">Detecting and Working with CloudLinux</a></li><li class="sidebar-sub-header"><a href="/integration_guide/#displaying-cpu-memory-io-limits" class="sidebar-link">Displaying CPU, Memory &amp; IO limits</a></li><li class="sidebar-sub-header"><a href="/integration_guide/#integrating-lve-limits-with-packages" class="sidebar-link">Integrating LVE Limits with Packages</a></li></ul></li><li><a href="/partner_portal/" class="sidebar-link">Partner Portal</a></li><li><a href="/cloudlinux_network/" class="sidebar-link">CloudLinux Network</a></li><li><a href="/cloudlinux_whmcs_plugin/" class="sidebar-link">CloudLinux WHMCS Plugin</a></li><li><a href="/deprecated/" class="sidebar-link">Deprecated</a></li><li><a href="/hardware_compatibility/" class="sidebar-link">Hardware Compatibility</a></li><li><a href="/cloudlinux_life-cycle/" class="sidebar-link">CloudLinux Life cycle</a></li></ul></div></li></ul> </div> <div class="page"> <div class="breadcrumb-wrapper page-breadcrumb" data-v-5e0e0acf><span class="breadcrumb-title" data-v-5e0e0acf>Documentation:</span> <a href="/integration_guide/" class="breadcrumb router-link-exact-active router-link-active" data-v-5e0e0acf>
    Integration Guide
  </a></div> <div class="page-nav-wrapper"><div class="page-nav"><a href="/additional_packages/" class="nav-arrow left"></a> <a href="/partner_portal/" class="nav-arrow right"></a></div></div> <div class="content"><h1 id="integration-guide"><a href="#integration-guide" aria-hidden="true" class="header-anchor">#</a> Integration Guide</h1> <p>Here you will find the instructions and common techniques used to integrate your software with CloudLinux.</p> <p><a href="/integration_guide/#detecting-and-working-with-cloudlinux">Detecting and Working with CloudLinux</a> .</p> <p><a href="/integration_guide/#displaying-cpu-memory-io-limits">Displaying </a> <span class="notranslate"><a href="/integration_guide/#displaying-cpu-memory-io-limits">CPU, Memory &amp; IO</a></span> <a href="/integration_guide/#displaying-cpu-memory-io-limits"> limits.</a></p> <p><a href="/integration_guide/#integrating-lve-limits-with-packages">Integrating LVE Limits with Packages.</a></p> <h2 id="detecting-and-working-with-cloudlinux"><a href="#detecting-and-working-with-cloudlinux" aria-hidden="true" class="header-anchor">#</a> Detecting and Working with CloudLinux</h2> <p>Detecting if system is running CloudLinux/CloudLinux kernel:</p> <div class="notranslate"><div class="language- extra-class"><pre class="language-text"><code>$ uname -r|grep lve 
</code></pre></div></div> <p>If you get an output, it means the system is running CloudLinux kernel. CloudLinux kernels have lve in its name, like: <span class="notranslate"> 2.6.32-458.18.1.lve1.2.44.el6.x86_64 </span></p> <p>Alternatively you can check for the presence of <span class="notranslate"><code>/proc/lve/list</code></span> file.</p> <p>Check if CageFS is enabled (as <span class="notranslate"> root </span> ):</p> <div class="notranslate"><div class="language- extra-class"><pre class="language-text"><code>$ /usr/sbin/cagefsctl --cagefs-status
</code></pre></div></div> <p>Check if CageFS is enabled for a particular user (as <span class="notranslate"><code>root</code></span> ):</p> <div class="notranslate"><div class="language- extra-class"><pre class="language-text"><code>$ /usr/sbin/cagefsctl --user-status _USER_NAME_
</code></pre></div></div> <p>Check if you are inside CageFS:</p> <p>Check for the presence of <span class="notranslate"><code>/var/.cagefs/.cagefs.token</code></span> file - if present, it means that you are inside CageFS.</p> <h2 id="displaying-cpu-memory-io-limits"><a href="#displaying-cpu-memory-io-limits" aria-hidden="true" class="header-anchor">#</a> Displaying CPU, Memory &amp; IO limits</h2> <p>Most control panels choose to display CloudLinux usage &amp; limits to end customers. To simplify that, we lve-stats exports a file that can be easily read and processed by a control panel to display the necessary information.</p> <p>The information is located in the <span class="notranslate">/var/lve/info </span> file. This information is updated every 5 minutes, and contains default limits (first line), as well as usage and limits for all customers. If a customer is not present in the file, it means that customer is not active (no scripts were executed recently for the customer), and a customer has default limits (so you can display no usage, and default limits in the control panel for that customer.</p> <p>The data is stored in a form of one line per customer, with coma separated values.</p> <table><thead><tr><th></th> <th></th></tr></thead> <tbody><tr><td>0</td> <td>user id</td></tr> <tr><td>1</td> <td><span class="notranslate"> entry processes </span></td></tr> <tr><td>2</td> <td><span class="notranslate"> entry processes </span> limit</td></tr> <tr><td>3</td> <td><span class="notranslate"> CPU </span></td></tr> <tr><td>4</td> <td><span class="notranslate"> CPU </span> limit</td></tr> <tr><td>5</td> <td><span class="notranslate"> Virtual Memory </span></td></tr> <tr><td>6</td> <td><span class="notranslate"> Virtual Memory </span> Limit</td></tr> <tr><td>7</td> <td>Number of <span class="notranslate">  virtual memory </span> faults</td></tr> <tr><td>8</td> <td>Number of <span class="notranslate"> entry processes </span> faults</td></tr> <tr><td>9</td> <td><span class="notranslate"> Physical Memory </span> Limit</td></tr> <tr><td>10</td> <td><span class="notranslate"> Physical Memory </span></td></tr> <tr><td>11</td> <td>Number of <span class="notranslate"> Physical memory </span> faults</td></tr> <tr><td>12</td> <td><span class="notranslate"> Number of processes </span> limit</td></tr> <tr><td>13</td> <td><span class="notranslate"> Number of processes </span></td></tr> <tr><td>14</td> <td><span class="notranslate"> Number of processes </span> fault</td></tr> <tr><td>15</td> <td>Reserved</td></tr> <tr><td>16</td> <td><span class="notranslate"> IO </span> Usage</td></tr> <tr><td>17</td> <td><span class="notranslate"> IO </span> Limit</td></tr></tbody></table> <p>With LVE version 4 (CloudLinux lve0.x) only the first 9 parameters are available. You can check the the version by reading the first byte of <span class="notranslate">/proc/lve/list. </span></p> <p>In the version 6 all 15 parameters should be available.</p> <p>There are only 2 LVE versions currently used in production. Future versions might add more fields, but will not alter order of existing fields.</p> <p>Memory is defined in 4KB pages (so, 1024 would mean 1024 4KB pages, or 4MB).</p> <p><span class="notranslate"> IO </span> is defined as KB/s.</p> <p><span class="notranslate"> CPU </span> is defined as % of total number of cores on a server.</p> <h2 id="integrating-lve-limits-with-packages"><a href="#integrating-lve-limits-with-packages" aria-hidden="true" class="header-anchor">#</a> Integrating LVE Limits with Packages</h2> <p><strong>[lve-utils 1.4+]</strong></p> <p>CloudLinux can automatically detect the most popular control panels, like cPanel - and allows to set different limits for users in different packages. It simplifies management as you don't have to choose between one limit that fits all your customers on the server, or individual limits for the customers.</p> <p>If you have a custom made control panel, with your own 'package' implementation, you can still use CloudLinux framework to manage limits for your packages.</p> <p>To do that, you would need:</p> <p>Implement script that would map users to packages.</p> <p>Configure lvectl to use your script.</p> <p><strong>Implementing script</strong></p> <p>A script can be written in any language, and it has to be executable.</p> <p>It should accept the following arguments:</p> <p>--list-all                        prints [userid package] pairs</p> <p>Output should look like a list of space separate pairs of user Linux IDs and package names.</p> <div class="notranslate"><div class="language- extra-class"><pre class="language-text"><code>100 package1
101 package1
102 package2
103 package3
</code></pre></div></div> <p><span class="notranslate">--userid=id prints package for a user specified </span></p> <p>Output should contain package name, like:</p> <div class="notranslate"><div class="language- extra-class"><pre class="language-text"><code>package1
</code></pre></div></div> <p><span class="notranslate">--package=&quot;package&quot;    prints users for a package specified. </span></p> <p>Output should look like a list of user Linux IDs.</p> <div class="notranslate"><div class="language- extra-class"><pre class="language-text"><code>100
101
</code></pre></div></div> <p><span class="notranslate">--list-packages prints the list of packages </span></p> <p>Output contains a list of names of packages, like:</p> <div class="notranslate"><div class="language- extra-class"><pre class="language-text"><code>package1
package2
package3
</code></pre></div></div> <p><strong>Configuring lvectl to use your custom script</strong></p> <p>Edit <span class="notranslate">/etc/sysconfig/cloudlinux </span> file.</p> <p>Edit or modify parameter <span class="notranslate"><code>CUSTOM_GETPACKAGE_SCRIPT</code></span>, and set it to point to your script, like: <span class="notranslate"><code>CUSTOM_GETPACKAGE_SCRIPT=/absolute/path/to/your/script</code></span></p> <p>For the script example please check the following article: <a href="https://cloudlinux.zendesk.com/hc/en-us/articles/115004529105-Integrating-LVE-limits-with-packages-for-unsupported-control-panels" target="_blank" rel="noopener noreferrer">https://cloudlinux.zendesk.com/hc/en-us/articles/115004529105-Integrating-LVE-limits-with-packages-for-unsupported-control-panels<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></div> <div class="page-edit"><div class="edit-link"><a href="https://github.com/cloudlinux/cloudlinux-doc/edit/dev/docs/integration_guide/README.md" target="_blank" rel="noopener noreferrer">Edit this page</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <!----></div> <div class="back-to-top" data-v-5366e0dd><a href="/integration_guide/#app" class="nav-arrow top back-to-top__link" data-v-5366e0dd></a></div> </div> <div class="footer" data-v-20b89de8><div data-v-20b89de8><a href="https://cloudlinux.com" data-v-20b89de8><img src="/assets/img/we-are-cloudlinux.783ed390.svg" alt="We are Cloudlinux" data-v-20b89de8></a></div> <div class="footer-company-title" data-v-20b89de8>2019. CloudLinux Inc</div> <div data-v-20b89de8><div data-v-20b89de8><a href="https://cloudlinux.zendesk.com/hc/sections/115001344329-How-do-I" target="_blank" data-v-20b89de8>How to</a></div><div data-v-20b89de8><a href="https://www.cloudlinux.com/getting-started-with-cloudlinux-os" target="_blank" data-v-20b89de8>Getting started</a></div><div data-v-20b89de8><a href="https://cloudlinux.zendesk.com/hc/en-us/requests/new" target="_blank" data-v-20b89de8>Contact support</a></div><div data-v-20b89de8><a href="https://www.cloudlinux.com/blog" target="_blank" data-v-20b89de8>Blog</a></div></div> <div class="social" data-v-20b89de8><span class="footer-social-text" data-v-20b89de8>Stay in touch</span> <a href="https://www.facebook.com/cloudlinux/" target="_blank" data-v-20b89de8><img src="/fb.png" class="footer-social-logo" data-v-20b89de8></a><a href="https://twitter.com/cloudlinuxos/" target="_blank" data-v-20b89de8><img src="/tw.png" class="footer-social-logo" data-v-20b89de8></a><a href="https://linkedin.com/company/cloudlinux" target="_blank" data-v-20b89de8><img src="/in.png" class="footer-social-logo" data-v-20b89de8></a><a href="https://www.youtube.com/channel/UCZ3YMHWnMP7TaxlXVay5-aw" target="_blank" data-v-20b89de8><img src="/ytube.png" class="footer-social-logo" data-v-20b89de8></a></div></div> <!----></div></div>
    <script src="/assets/js/app.fa222234.js" defer></script><script src="/assets/js/17.816bc79a.js" defer></script>
  </body>
</html>
